config:
set system login user ansible_user1 class super-user authentication plain-text-password 
New password:
Retype new password:

set system services netconf ssh root-login allow.


========================
junos_netconf


=======================


root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# ansible-playbook -i inventory_network_cli pb.juniper_junos_netconf.yml -vvv 
ansible-playbook [core 2.18.3]
  config file = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.12/site-packages/ansible
  ansible collection location = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.12.0 (main, Mar  5 2025, 22:49:30) [GCC 9.3.0] (/usr/bin/python3)
  jinja version = 3.1.6
  libyaml = True
Using /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg as config file
host_list declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
script declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
auto declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
Parsed /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli inventory source with ini plugin
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_netconf: ["'NoneType' object has no attribute 'get'"]
[WARNING]: errors were encountered during the plugin load for assert: ["'NoneType' object has no attribute 'get'"]
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
Skipping callback 'default', as we already have a stdout callback.
Skipping callback 'minimal', as we already have a stdout callback.
Skipping callback 'oneline', as we already have a stdout callback.

PLAYBOOK: pb.juniper_junos_netconf.yml ***********************************************************************************************************************************************************************************************************************
1 plays in pb.juniper_junos_netconf.yml

PLAY [Functional Test - junos_netconf module] ****************************************************************************************************************************************************************************************************************

TASK [Enable NETCONF service on port 830] ********************************************************************************************************************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_netconf.yml:9
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos: ["'NoneType' object has no attribute 'get'"]
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308 `" && echo ansible-tmp-1749188252.784234-1787543-40548259530308="` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_netconf.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1787539m3iza3xa/tmp9e0667yx TO /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/AnsiballZ_junos_netconf.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/ /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/AnsiballZ_junos_netconf.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/AnsiballZ_junos_netconf.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "commands": [
        "set system services netconf ssh port 830"
    ],
    "invocation": {
        "module_args": {
            "netconf_port": 830,
            "state": "present"
        }
    }
}

TASK [Assert NETCONF service was enabled] ********************************************************************************************************************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_netconf.yml:15
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Disable NETCONF service] *******************************************************************************************************************************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_netconf.yml:21
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118 `" && echo ansible-tmp-1749188257.5077388-1787572-234496017057118="` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_netconf.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1787539m3iza3xa/tmphoc9xf0d TO /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/AnsiballZ_junos_netconf.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/ /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/AnsiballZ_junos_netconf.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/AnsiballZ_junos_netconf.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "commands": [
        "delete system services netconf"
    ],
    "invocation": {
        "module_args": {
            "netconf_port": 830,
            "state": "absent"
        }
    }
}

TASK [Assert NETCONF service was disabled] *******************************************************************************************************************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_netconf.yml:26
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

PLAY RECAP ***************************************************************************************************************************************************************************************************************************************************
10.221.160.25              : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# 

==========================================================================================================================================================



junos_ping
============================================================================================================================================================

root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# ansible-playbook -i inventory_network_cli pb.juniper_junos_ping.yml
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_ping: ["'NoneType' object has no attribute 'get'"]
[WARNING]: errors were encountered during the plugin load for assert: ["'NoneType' object has no attribute 'get'"]

PLAY [Functional Test - junos_ping module] *******************************************************************************************************************************************************************************************************************

TASK [Test reachability to target] ***************************************************************************************************************************************************************************************************************************
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos: ["'NoneType' object has no attribute 'get'"]
ok: [10.221.160.25]

TASK [Assert default ping worked] ****************************************************************************************************************************************************************************************************************************
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Test reachability to target using source and size set] *************************************************************************************************************************************************************************************************
ok: [10.221.160.25]

TASK [Assert source TTL ping worked] *************************************************************************************************************************************************************************************************************************
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Test unreachability to target using interval] **********************************************************************************************************************************************************************************************************
ok: [10.221.160.25]

TASK [Assert unreachable ping shows 100% loss] ***************************************************************************************************************************************************************************************************************
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Test reachability to target setting count and interface] ***********************************************************************************************************************************************************************************************
ok: [10.221.160.25]

TASK [Assert ping with count/interface worked] ***************************************************************************************************************************************************************************************************************
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Test reachability to target using do-not-fragment and rapid] *******************************************************************************************************************************************************************************************
ok: [10.221.160.25]

TASK [Assert ping with DF bit and rapid worked] **************************************************************************************************************************************************************************************************************
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

PLAY RECAP ***************************************************************************************************************************************************************************************************************************************************
10.221.160.25              : ok=10   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


==========================

junos_package:

=========================



root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# ansible-playbook -i inventory_network_cli pb.juniper_junos_package_debug.yml -vvvvv
ansible-playbook [core 2.18.3]
  config file = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.12/site-packages/ansible
  ansible collection location = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.12.0 (main, Mar  5 2025, 22:49:30) [GCC 9.3.0] (/usr/bin/python3)
  jinja version = 3.1.6
  libyaml = True
Using /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg as config file
setting up inventory plugins
Loading collection ansible.builtin from 
host_list declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
script declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
auto declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
Parsed /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli inventory source with ini plugin
Loading collection junipernetworks.junos from /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/junipernetworks/junos
redirecting (type: modules) junipernetworks.junos.junos_package to juniper.device.junos_package
Loading collection juniper.device from /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_package: ["'NoneType' object has no attribute 'get'"]
[WARNING]: errors were encountered during the plugin load for wait_for: ["'NoneType' object has no attribute 'get'"]
[WARNING]: errors were encountered during the plugin load for assert: ["'NoneType' object has no attribute 'get'"]
Loading callback plugin default of type stdout, v2.0 from /usr/local/lib/python3.12/site-packages/ansible/plugins/callback/default.py
Attempting to use 'default' callback.
Skipping callback 'default', as we already have a stdout callback.
Attempting to use 'junit' callback.
Attempting to use 'minimal' callback.
Skipping callback 'minimal', as we already have a stdout callback.
Attempting to use 'oneline' callback.
Skipping callback 'oneline', as we already have a stdout callback.
Attempting to use 'tree' callback.

PLAYBOOK: pb.juniper_junos_package_debug.yml ***************************************************************************************************
Positional arguments: pb.juniper_junos_package_debug.yml
verbosity: 5
connection: ssh
become_method: sudo
tags: ('all',)
inventory: ('/root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli',)
forks: 5
1 plays in pb.juniper_junos_package_debug.yml

PLAY [Functional Test - junos_package module] **************************************************************************************************

TASK [Install Junos package with reboot (forced downgrade)] ************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_package_debug.yml:9
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_package to juniper.device.junos_package
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos: ["'NoneType' object has no attribute 'get'"]
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.network_cli
<10.221.160.25> local domain socket does not exist, starting it
<10.221.160.25> control socket path is /root/.ansible/pc/6a5aa13690
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
<10.221.160.25> Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
<10.221.160.25> Loading collection juniper.device from /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device
<10.221.160.25> local domain socket listeners started successfully
<10.221.160.25> loaded cliconf plugin ansible_collections.juniper.device.plugins.cliconf.junos from path /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/cliconf/junos.py for network_os juniper.device.junos
<10.221.160.25> ssh type is set to auto
<10.221.160.25> autodetecting ssh_type
<10.221.160.25> ssh type is now set to libssh
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/6a5aa13690
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833205wdoucubl `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443413.150922-1833210-13099680292302 `" && echo ansible-tmp-1749443413.150922-1833210-13099680292302="` echo /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443413.150922-1833210-13099680292302 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_package to juniper.device.junos_package
Including module_utils file ansible/__init__.py
Including module_utils file ansible/module_utils/__init__.py
Including module_utils file ansible/module_utils/basic.py
Including module_utils file ansible/module_utils/_text.py
Including module_utils file ansible/module_utils/common/_utils.py
Including module_utils file ansible/module_utils/common/__init__.py
Including module_utils file ansible/module_utils/common/arg_spec.py
Including module_utils file ansible/module_utils/common/file.py
Including module_utils file ansible/module_utils/common/locale.py
Including module_utils file ansible/module_utils/common/parameters.py
Including module_utils file ansible/module_utils/common/collections.py
Including module_utils file ansible/module_utils/common/process.py
Including module_utils file ansible/module_utils/common/sys_info.py
Including module_utils file ansible/module_utils/common/text/converters.py
Including module_utils file ansible/module_utils/common/text/__init__.py
Including module_utils file ansible/module_utils/common/text/formatters.py
Including module_utils file ansible/module_utils/common/validation.py
Including module_utils file ansible/module_utils/common/warnings.py
Including module_utils file ansible/module_utils/compat/selinux.py
Including module_utils file ansible/module_utils/compat/__init__.py
Including module_utils file ansible/module_utils/distro/__init__.py
Including module_utils file ansible/module_utils/distro/_distro.py
Including module_utils file ansible/module_utils/errors.py
Including module_utils file ansible/module_utils/parsing/convert_bool.py
Including module_utils file ansible/module_utils/parsing/__init__.py
Including module_utils file ansible/module_utils/pycompat24.py
Including module_utils file ansible/module_utils/six/__init__.py
Including module_utils file ansible_collections/juniper/device/plugins/module_utils/network/junos/junos.py
Including module_utils file ansible/module_utils/connection.py
Including module_utils file ansible/module_utils/common/json.py
Including module_utils file ansible_collections/__init__.py
Including module_utils file ansible_collections/ansible/netcommon/plugins/module_utils/network/common/netconf.py
Including module_utils file ansible_collections/ansible/__init__.py
Including module_utils file ansible_collections/ansible/netcommon/__init__.py
Including module_utils file ansible_collections/ansible/netcommon/plugins/__init__.py
Including module_utils file ansible_collections/ansible/netcommon/plugins/module_utils/__init__.py
Including module_utils file ansible_collections/ansible/netcommon/plugins/module_utils/network/__init__.py
Including module_utils file ansible_collections/ansible/netcommon/plugins/module_utils/network/common/__init__.py
Including module_utils file ansible_collections/juniper/__init__.py
Including module_utils file ansible_collections/juniper/device/__init__.py
Including module_utils file ansible_collections/juniper/device/plugins/__init__.py
Including module_utils file ansible_collections/juniper/device/plugins/module_utils/__init__.py
Including module_utils file ansible_collections/juniper/device/plugins/module_utils/network/__init__.py
Including module_utils file ansible_collections/juniper/device/plugins/module_utils/network/junos/__init__.py
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_package.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833205wdoucubl/tmpum_mxns3 TO /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443413.150922-1833210-13099680292302/AnsiballZ_junos_package.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443413.150922-1833210-13099680292302/ /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443413.150922-1833210-13099680292302/AnsiballZ_junos_package.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443413.150922-1833210-13099680292302/AnsiballZ_junos_package.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443413.150922-1833210-13099680292302/ > /dev/null 2>&1 && sleep 0'
[DEPRECATION WARNING]: Param 'provider' is deprecated. See the module docs for more information. This feature will be removed from 
junipernetworks.junos in a release after 2022-06-01. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "force": true,
            "force_host": false,
            "issu": false,
            "no_copy": true,
            "provider": {
                "host": "10.221.160.25",
                "password": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
                "port": 830,
                "ssh_keyfile": null,
                "timeout": null,
                "transport": "netconf",
                "username": "root"
            },
            "reboot": true,
            "src": "/var/tmp/junos-install-vsrx3-x86-64-23.1I-20221116_dev_common.0.0409.tgz",
            "ssh_config": null,
            "ssh_private_key_file": null,
            "unlink": false,
            "validate": false,
            "version": null
        }
    }
}

TASK [Wait for device to come back online after reboot] ****************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_package_debug.yml:24
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
[WARNING]: errors were encountered during the plugin load for wait: ["'NoneType' object has no attribute 'get'"]
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.network_cli
<10.221.160.25> found existing local domain socket, using it!
<10.221.160.25> updating play_context for connection
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/6a5aa13690
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833205wdoucubl `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443510.1202593-1833252-262101884473667 `" && echo ansible-tmp-1749443510.1202593-1833252-262101884473667="` echo /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443510.1202593-1833252-262101884473667 `" ) && sleep 0'
Including module_utils file ansible/__init__.py
Including module_utils file ansible/module_utils/__init__.py
Including module_utils file ansible/module_utils/basic.py
Including module_utils file ansible/module_utils/_text.py
Including module_utils file ansible/module_utils/common/_utils.py
Including module_utils file ansible/module_utils/common/__init__.py
Including module_utils file ansible/module_utils/common/arg_spec.py
Including module_utils file ansible/module_utils/common/file.py
Including module_utils file ansible/module_utils/common/locale.py
Including module_utils file ansible/module_utils/common/parameters.py
Including module_utils file ansible/module_utils/common/collections.py
Including module_utils file ansible/module_utils/common/process.py
Including module_utils file ansible/module_utils/common/sys_info.py
Including module_utils file ansible/module_utils/common/text/converters.py
Including module_utils file ansible/module_utils/common/text/__init__.py
Including module_utils file ansible/module_utils/common/text/formatters.py
Including module_utils file ansible/module_utils/common/validation.py
Including module_utils file ansible/module_utils/common/warnings.py
Including module_utils file ansible/module_utils/compat/datetime.py
Including module_utils file ansible/module_utils/compat/__init__.py
Including module_utils file ansible/module_utils/compat/selinux.py
Including module_utils file ansible/module_utils/distro/__init__.py
Including module_utils file ansible/module_utils/distro/_distro.py
Including module_utils file ansible/module_utils/errors.py
Including module_utils file ansible/module_utils/parsing/convert_bool.py
Including module_utils file ansible/module_utils/parsing/__init__.py
Including module_utils file ansible/module_utils/pycompat24.py
Including module_utils file ansible/module_utils/six/__init__.py
Using module file /usr/local/lib/python3.12/site-packages/ansible/modules/wait_for.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833205wdoucubl/tmpdcmtz1dd TO /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443510.1202593-1833252-262101884473667/AnsiballZ_wait_for.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443510.1202593-1833252-262101884473667/ /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443510.1202593-1833252-262101884473667/AnsiballZ_wait_for.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443510.1202593-1833252-262101884473667/AnsiballZ_wait_for.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833205wdoucubl/ansible-tmp-1749443510.1202593-1833252-262101884473667/ > /dev/null 2>&1 && sleep 0'
fatal: [10.221.160.25]: FAILED! => {
    "changed": false,
    "elapsed": 300,
    "invocation": {
        "module_args": {
            "active_connection_states": [
                "ESTABLISHED",
                "FIN_WAIT1",
                "FIN_WAIT2",
                "SYN_RECV",
                "SYN_SENT",
                "TIME_WAIT"
            ],
            "connect_timeout": 5,
            "delay": 30,
            "exclude_hosts": null,
            "host": "10.221.160.25",
            "msg": null,
            "path": null,
            "port": 830,
            "search_regex": null,
            "sleep": 1,
            "state": "started",
            "timeout": 300
        }
    },
    "msg": "Timeout when waiting for 10.221.160.25:830"
}

PLAY RECAP *************************************************************************************************************************************
10.221.160.25              : ok=1    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   




===============================


junos_l2_interface

===============================

root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# ansible-playbook -i inventory_junos pb.juniper_junos_l2_interfaces.yml -vvvv
ansible-playbook [core 2.18.3]
  config file = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.12/site-packages/ansible
  ansible collection location = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.12.0 (main, Mar  5 2025, 22:49:30) [GCC 9.3.0] (/usr/bin/python3)
  jinja version = 3.1.6
  libyaml = True
Using /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg as config file
setting up inventory plugins
Loading collection ansible.builtin from 
host_list declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
script declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
auto declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
Parsed /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos inventory source with ini plugin
Loading collection junipernetworks.junos from /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/junipernetworks/junos
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Loading collection juniper.device from /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_l2_interfaces: ["'NoneType' object has no attribute
'get'"]
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
[WARNING]: errors were encountered during the plugin load for assert: ["'NoneType' object has no attribute 'get'"]
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Loading callback plugin default of type stdout, v2.0 from /usr/local/lib/python3.12/site-packages/ansible/plugins/callback/default.py
Skipping callback 'default', as we already have a stdout callback.
Skipping callback 'minimal', as we already have a stdout callback.
Skipping callback 'oneline', as we already have a stdout callback.

PLAYBOOK: pb.juniper_junos_l2_interfaces.yml ***************************************************************************************************
Positional arguments: pb.juniper_junos_l2_interfaces.yml
verbosity: 4
connection: ssh
become_method: sudo
tags: ('all',)
inventory: ('/root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos',)
forks: 5
1 plays in pb.juniper_junos_l2_interfaces.yml

PLAY [Functional Test - junos_l2_interfaces module] ********************************************************************************************

TASK [Pre-clean - delete any existing L2 config] ***********************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:14
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos: ["'NoneType' object has no attribute 'get'"]
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.netconf
<10.221.160.25> local domain socket does not exist, starting it
<10.221.160.25> control socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
<10.221.160.25> Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
<10.221.160.25> Loading collection juniper.device from /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device
<10.221.160.25> local domain socket listeners started successfully
<10.221.160.25> loaded netconf plugin ansible_collections.juniper.device.plugins.netconf.junos from path /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/netconf/junos.py for network_os juniper.device.junos
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444911.3583388-1833602-124338853883457 `" && echo ansible-tmp-1749444911.3583388-1833602-124338853883457="` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444911.3583388-1833602-124338853883457 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_l2_interfaces.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833598_jx8iscs/tmpetiz362u TO /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444911.3583388-1833602-124338853883457/AnsiballZ_junos_l2_interfaces.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444911.3583388-1833602-124338853883457/ /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444911.3583388-1833602-124338853883457/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444911.3583388-1833602-124338853883457/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444911.3583388-1833602-124338853883457/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "before": [
        {
            "enhanced_layer": false,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": false,
            "name": "ge-0/0/4",
            "unit": 0
        }
    ],
    "changed": false,
    "commands": [
        "<nc:interfaces xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"/>"
    ],
    "invocation": {
        "module_args": {
            "config": [
                {
                    "access": null,
                    "enhanced_layer": null,
                    "name": "ge-0/0/3",
                    "trunk": null,
                    "unit": null
                },
                {
                    "access": null,
                    "enhanced_layer": null,
                    "name": "ge-0/0/4",
                    "trunk": null,
                    "unit": null
                }
            ],
            "running_config": null,
            "state": "deleted"
        }
    }
}

TASK [Apply L2 interface configuration using merged] *******************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:22
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.netconf
<10.221.160.25> found existing local domain socket, using it!
<10.221.160.25> identified ncclient device handler: junos.
<10.221.160.25> ESTABLISH NETCONF SSH CONNECTION FOR USER: root on PORT 830 TO 10.221.160.25 WITH SSH_CONFIG = None
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444916.4849505-1833633-114486663442050 `" && echo ansible-tmp-1749444916.4849505-1833633-114486663442050="` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444916.4849505-1833633-114486663442050 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_l2_interfaces.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833598_jx8iscs/tmp950njcry TO /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444916.4849505-1833633-114486663442050/AnsiballZ_junos_l2_interfaces.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444916.4849505-1833633-114486663442050/ /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444916.4849505-1833633-114486663442050/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444916.4849505-1833633-114486663442050/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444916.4849505-1833633-114486663442050/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "after": [
        {
            "access": {
                "vlan": "101"
            },
            "enhanced_layer": true,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": true,
            "name": "ge-0/0/4",
            "trunk": {
                "allowed_vlans": [
                    "30"
                ],
                "native_vlan": "50"
            },
            "unit": 0
        }
    ],
    "before": [
        {
            "enhanced_layer": false,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": false,
            "name": "ge-0/0/4",
            "unit": 0
        }
    ],
    "changed": true,
    "commands": [
        "<nc:interfaces xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:interface><nc:name>ge-0/0/3</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode>access</nc:interface-mode><nc:vlan><nc:members>101</nc:members></nc:vlan></nc:ethernet-switching></nc:family></nc:unit></nc:interface><nc:interface><nc:name>ge-0/0/4</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode>trunk</nc:interface-mode><nc:vlan><nc:members>30</nc:members></nc:vlan></nc:ethernet-switching></nc:family></nc:unit><nc:native-vlan-id>50</nc:native-vlan-id></nc:interface></nc:interfaces>"
    ],
    "invocation": {
        "module_args": {
            "config": [
                {
                    "access": {
                        "vlan": "101"
                    },
                    "enhanced_layer": null,
                    "name": "ge-0/0/3",
                    "trunk": null,
                    "unit": null
                },
                {
                    "access": null,
                    "enhanced_layer": null,
                    "name": "ge-0/0/4",
                    "trunk": {
                        "allowed_vlans": [
                            "30"
                        ],
                        "native_vlan": "50"
                    },
                    "unit": null
                }
            ],
            "running_config": null,
            "state": "merged"
        }
    }
}

TASK [Assert merged L2 config applied] *********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:35
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Apply L2 interface configuration using replaced] *****************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:41
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.netconf
<10.221.160.25> found existing local domain socket, using it!
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444924.8825636-1833659-176018826632876 `" && echo ansible-tmp-1749444924.8825636-1833659-176018826632876="` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444924.8825636-1833659-176018826632876 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_l2_interfaces.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833598_jx8iscs/tmpb_10m6wd TO /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444924.8825636-1833659-176018826632876/AnsiballZ_junos_l2_interfaces.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444924.8825636-1833659-176018826632876/ /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444924.8825636-1833659-176018826632876/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444924.8825636-1833659-176018826632876/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444924.8825636-1833659-176018826632876/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "after": [
        {
            "access": {
                "vlan": "102"
            },
            "enhanced_layer": true,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": true,
            "name": "ge-0/0/4",
            "trunk": {
                "allowed_vlans": [
                    "31"
                ],
                "native_vlan": "51"
            },
            "unit": 0
        }
    ],
    "before": [
        {
            "access": {
                "vlan": "101"
            },
            "enhanced_layer": true,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": true,
            "name": "ge-0/0/4",
            "trunk": {
                "allowed_vlans": [
                    "30"
                ],
                "native_vlan": "50"
            },
            "unit": 0
        }
    ],
    "changed": true,
    "commands": [
        "<nc:interfaces xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:interface><nc:name>ge-0/0/3</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode delete=\"delete\"/><nc:vlan delete=\"delete\"/></nc:ethernet-switching></nc:family></nc:unit><nc:native-vlan-id delete=\"delete\"/></nc:interface><nc:interface><nc:name>ge-0/0/4</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode delete=\"delete\"/><nc:vlan delete=\"delete\"/></nc:ethernet-switching></nc:family></nc:unit><nc:native-vlan-id delete=\"delete\"/></nc:interface><nc:interface><nc:name>ge-0/0/3</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode>access</nc:interface-mode><nc:vlan><nc:members>102</nc:members></nc:vlan></nc:ethernet-switching></nc:family></nc:unit></nc:interface><nc:interface><nc:name>ge-0/0/4</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode>trunk</nc:interface-mode><nc:vlan><nc:members>31</nc:members></nc:vlan></nc:ethernet-switching></nc:family></nc:unit><nc:native-vlan-id>51</nc:native-vlan-id></nc:interface></nc:interfaces>"
    ],
    "invocation": {
        "module_args": {
            "config": [
                {
                    "access": {
                        "vlan": "102"
                    },
                    "enhanced_layer": null,
                    "name": "ge-0/0/3",
                    "trunk": null,
                    "unit": null
                },
                {
                    "access": null,
                    "enhanced_layer": null,
                    "name": "ge-0/0/4",
                    "trunk": {
                        "allowed_vlans": [
                            "31"
                        ],
                        "native_vlan": "51"
                    },
                    "unit": null
                }
            ],
            "running_config": null,
            "state": "replaced"
        }
    }
}

TASK [Assert replaced L2 config applied] *******************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:54
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Apply L2 interface configuration using overridden] ***************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:60
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.netconf
<10.221.160.25> found existing local domain socket, using it!
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444931.9596584-1833685-20536207726529 `" && echo ansible-tmp-1749444931.9596584-1833685-20536207726529="` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444931.9596584-1833685-20536207726529 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_l2_interfaces.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833598_jx8iscs/tmpwafkomal TO /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444931.9596584-1833685-20536207726529/AnsiballZ_junos_l2_interfaces.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444931.9596584-1833685-20536207726529/ /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444931.9596584-1833685-20536207726529/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444931.9596584-1833685-20536207726529/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444931.9596584-1833685-20536207726529/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "after": [
        {
            "access": {
                "vlan": "103"
            },
            "enhanced_layer": true,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": false,
            "name": "ge-0/0/4",
            "unit": 0
        }
    ],
    "before": [
        {
            "access": {
                "vlan": "102"
            },
            "enhanced_layer": true,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": true,
            "name": "ge-0/0/4",
            "trunk": {
                "allowed_vlans": [
                    "31"
                ],
                "native_vlan": "51"
            },
            "unit": 0
        }
    ],
    "changed": true,
    "commands": [
        "<nc:interfaces xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:interface><nc:name>ge-0/0/3</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode delete=\"delete\"/><nc:vlan delete=\"delete\"/></nc:ethernet-switching></nc:family></nc:unit><nc:native-vlan-id delete=\"delete\"/></nc:interface><nc:interface><nc:name>ge-0/0/3</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode>access</nc:interface-mode><nc:vlan><nc:members>103</nc:members></nc:vlan></nc:ethernet-switching></nc:family></nc:unit></nc:interface><nc:interface><nc:name>ge-0/0/4</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode delete=\"delete\"/><nc:vlan delete=\"delete\"/></nc:ethernet-switching></nc:family></nc:unit><nc:native-vlan-id delete=\"delete\"/></nc:interface></nc:interfaces>"
    ],
    "invocation": {
        "module_args": {
            "config": [
                {
                    "access": {
                        "vlan": "103"
                    },
                    "enhanced_layer": null,
                    "name": "ge-0/0/3",
                    "trunk": null,
                    "unit": null
                }
            ],
            "running_config": null,
            "state": "overridden"
        }
    }
}

TASK [Assert overridden L2 config applied] *****************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:69
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Delete L2 config from interfaces] ********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:75
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.netconf
<10.221.160.25> found existing local domain socket, using it!
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444938.7348287-1833711-184848517843899 `" && echo ansible-tmp-1749444938.7348287-1833711-184848517843899="` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444938.7348287-1833711-184848517843899 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_l2_interfaces.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833598_jx8iscs/tmpjkt5ebdi TO /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444938.7348287-1833711-184848517843899/AnsiballZ_junos_l2_interfaces.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444938.7348287-1833711-184848517843899/ /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444938.7348287-1833711-184848517843899/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444938.7348287-1833711-184848517843899/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444938.7348287-1833711-184848517843899/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "after": [
        {
            "enhanced_layer": false,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": false,
            "name": "ge-0/0/4",
            "unit": 0
        }
    ],
    "before": [
        {
            "access": {
                "vlan": "103"
            },
            "enhanced_layer": true,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": false,
            "name": "ge-0/0/4",
            "unit": 0
        }
    ],
    "changed": true,
    "commands": [
        "<nc:interfaces xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:interface><nc:name>ge-0/0/3</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode delete=\"delete\"/><nc:vlan delete=\"delete\"/></nc:ethernet-switching></nc:family></nc:unit><nc:native-vlan-id delete=\"delete\"/></nc:interface></nc:interfaces>"
    ],
    "invocation": {
        "module_args": {
            "config": [
                {
                    "access": null,
                    "enhanced_layer": null,
                    "name": "ge-0/0/3",
                    "trunk": null,
                    "unit": null
                },
                {
                    "access": null,
                    "enhanced_layer": null,
                    "name": "ge-0/0/4",
                    "trunk": null,
                    "unit": null
                }
            ],
            "running_config": null,
            "state": "deleted"
        }
    }
}

TASK [Assert L2 config deleted] ****************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:83
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Apply rendered L2 config] ****************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:89
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.netconf
<10.221.160.25> found existing local domain socket, using it!
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444945.4957297-1833737-258573608570048 `" && echo ansible-tmp-1749444945.4957297-1833737-258573608570048="` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444945.4957297-1833737-258573608570048 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_l2_interfaces.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833598_jx8iscs/tmpcpjfmuoj TO /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444945.4957297-1833737-258573608570048/AnsiballZ_junos_l2_interfaces.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444945.4957297-1833737-258573608570048/ /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444945.4957297-1833737-258573608570048/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444945.4957297-1833737-258573608570048/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444945.4957297-1833737-258573608570048/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "config": [
                {
                    "access": {
                        "vlan": "104"
                    },
                    "enhanced_layer": null,
                    "name": "ge-0/0/3",
                    "trunk": null,
                    "unit": null
                },
                {
                    "access": null,
                    "enhanced_layer": null,
                    "name": "ge-0/0/4",
                    "trunk": {
                        "allowed_vlans": [
                            "32",
                            "33"
                        ],
                        "native_vlan": "52"
                    },
                    "unit": null
                }
            ],
            "running_config": null,
            "state": "rendered"
        }
    },
    "rendered": "<nc:interfaces xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:interface><nc:name>ge-0/0/3</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode>access</nc:interface-mode><nc:vlan><nc:members>104</nc:members></nc:vlan></nc:ethernet-switching></nc:family></nc:unit></nc:interface><nc:interface><nc:name>ge-0/0/4</nc:name><nc:unit><nc:name>0</nc:name><nc:family><nc:ethernet-switching><nc:interface-mode>trunk</nc:interface-mode><nc:vlan><nc:members>32</nc:members><nc:members>33</nc:members></nc:vlan></nc:ethernet-switching></nc:family></nc:unit><nc:native-vlan-id>52</nc:native-vlan-id></nc:interface></nc:interfaces>"
}

TASK [Assert rendered output is valid] *********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:102
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Parse L2 config from XML] ****************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:108
File lookup using /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/./parsed_configs/parsed_l2_interfaces.cfg as file
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.netconf
<10.221.160.25> found existing local domain socket, using it!
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444947.3928983-1833763-202593942880081 `" && echo ansible-tmp-1749444947.3928983-1833763-202593942880081="` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444947.3928983-1833763-202593942880081 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_l2_interfaces.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833598_jx8iscs/tmp69tl4652 TO /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444947.3928983-1833763-202593942880081/AnsiballZ_junos_l2_interfaces.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444947.3928983-1833763-202593942880081/ /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444947.3928983-1833763-202593942880081/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444947.3928983-1833763-202593942880081/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444947.3928983-1833763-202593942880081/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "config": null,
            "running_config": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<rpc-reply>\n  <configuration>\n    <interfaces>\n      <interface>\n        <name>ge-0/0/3</name>\n        <unit>\n          <name>0</name>\n          <family>\n            <ethernet-switching>\n              <interface-mode>access</interface-mode>\n              <vlan>\n                <members>104</members>\n              </vlan>\n            </ethernet-switching>\n          </family>\n        </unit>\n      </interface>\n    </interfaces>\n  </configuration>\n</rpc-reply>",
            "state": "parsed"
        }
    },
    "parsed": [
        {
            "access": {
                "vlan": "104"
            },
            "enhanced_layer": true,
            "name": "ge-0/0/3",
            "unit": 0
        }
    ]
}

TASK [Assert parsed output is valid] ***********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:114
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Gather current L2 interfaces config] *****************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:120
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
<10.221.160.25> attempting to start connection
<10.221.160.25> using connection plugin ansible.netcommon.netconf
<10.221.160.25> found existing local domain socket, using it!
<10.221.160.25> Loading collection ansible.builtin from 
<10.221.160.25> local domain socket path is /root/.ansible/pc/4d55826394
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444949.0930717-1833789-33377315935050 `" && echo ansible-tmp-1749444949.0930717-1833789-33377315935050="` echo /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444949.0930717-1833789-33377315935050 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_l2_interfaces to juniper.device.junos_l2_interfaces
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_l2_interfaces.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833598_jx8iscs/tmpdddv40ho TO /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444949.0930717-1833789-33377315935050/AnsiballZ_junos_l2_interfaces.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444949.0930717-1833789-33377315935050/ /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444949.0930717-1833789-33377315935050/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444949.0930717-1833789-33377315935050/AnsiballZ_junos_l2_interfaces.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833598_jx8iscs/ansible-tmp-1749444949.0930717-1833789-33377315935050/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "changed": false,
    "gathered": [
        {
            "enhanced_layer": false,
            "name": "ge-0/0/3",
            "unit": 0
        },
        {
            "enhanced_layer": false,
            "name": "ge-0/0/4",
            "unit": 0
        }
    ],
    "invocation": {
        "module_args": {
            "config": null,
            "running_config": null,
            "state": "gathered"
        }
    }
}

TASK [Assert gathered output is valid] *********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_l2_interfaces.yml:125
Loading collection ansible.netcommon from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/netcommon
Loading collection ansible.utils from /usr/local/lib/python3.12/site-packages/ansible_collections/ansible/utils
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

PLAY RECAP *************************************************************************************************************************************
10.221.160.25              : ok=15   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


============================


junos_config

============================

root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# ansible-playbook -i inventory_junos pb.juniper_junos_config.yml -vvv
ansible-playbook [core 2.18.3]
  config file = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.12/site-packages/ansible
  ansible collection location = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.12.0 (main, Mar  5 2025, 22:49:30) [GCC 9.3.0] (/usr/bin/python3)
  jinja version = 3.1.6
  libyaml = True
Using /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg as config file
host_list declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
script declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
auto declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
Parsed /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos inventory source with ini plugin
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_config: ["'NoneType' object has no attribute 'get'"]
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
[WARNING]: errors were encountered during the plugin load for debug: ["'NoneType' object has no attribute 'get'"]
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
Skipping callback 'default', as we already have a stdout callback.
Skipping callback 'minimal', as we already have a stdout callback.
Skipping callback 'oneline', as we already have a stdout callback.

PLAYBOOK: pb.juniper_junos_config.yml **********************************************************************************************************
1 plays in pb.juniper_junos_config.yml

PLAY [Functional Test - junos_config module] ***************************************************************************************************

TASK [Pre-clean - Remove existing test interface description] **********************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:10
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos: ["'NoneType' object has no attribute 'get'"]
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445071.490752-1833845-121056284171412 `" && echo ansible-tmp-1749445071.490752-1833845-121056284171412="` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445071.490752-1833845-121056284171412 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_config.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833841liov5qze/tmp4nw4jwtl TO /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445071.490752-1833845-121056284171412/AnsiballZ_junos_config.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445071.490752-1833845-121056284171412/ /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445071.490752-1833845-121056284171412/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445071.490752-1833845-121056284171412/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445071.490752-1833845-121056284171412/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "backup": false,
            "backup_options": null,
            "check_commit": false,
            "comment": "Clean up test interface config",
            "confirm": 0,
            "confirm_commit": false,
            "lines": [
                "delete interfaces ge-0/0/1 unit 0 description"
            ],
            "replace": null,
            "rollback": null,
            "src": null,
            "src_format": null,
            "update": "merge",
            "zeroize": false
        }
    }
}

TASK [Assert pre-clean successful] *************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:17
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Apply test config - set interface description] *******************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:22
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
<10.221.160.25> identified ncclient device handler: junos.
<10.221.160.25> ESTABLISH NETCONF SSH CONNECTION FOR USER: root on PORT 830 TO 10.221.160.25 WITH SSH_CONFIG = None
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445074.3426414-1833877-275154001739683 `" && echo ansible-tmp-1749445074.3426414-1833877-275154001739683="` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445074.3426414-1833877-275154001739683 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_config.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833841liov5qze/tmpp9qt7ys1 TO /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445074.3426414-1833877-275154001739683/AnsiballZ_junos_config.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445074.3426414-1833877-275154001739683/ /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445074.3426414-1833877-275154001739683/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445074.3426414-1833877-275154001739683/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445074.3426414-1833877-275154001739683/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "backup": false,
            "backup_options": null,
            "check_commit": false,
            "comment": "Apply test config",
            "confirm": 0,
            "confirm_commit": false,
            "lines": [
                "set interfaces ge-0/0/1 unit 0 description \"FT Test interface\""
            ],
            "replace": null,
            "rollback": null,
            "src": null,
            "src_format": null,
            "update": "merge",
            "zeroize": false
        }
    }
}

TASK [Assert interface config applied] *********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:29
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Confirm commit test with timer] **********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:34
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445080.0908828-1833903-29296001582803 `" && echo ansible-tmp-1749445080.0908828-1833903-29296001582803="` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445080.0908828-1833903-29296001582803 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_config.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833841liov5qze/tmpc1a0cmgg TO /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445080.0908828-1833903-29296001582803/AnsiballZ_junos_config.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445080.0908828-1833903-29296001582803/ /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445080.0908828-1833903-29296001582803/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445080.0908828-1833903-29296001582803/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445080.0908828-1833903-29296001582803/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "backup": false,
            "backup_options": null,
            "check_commit": false,
            "comment": "Test commit confirmation",
            "confirm": 3,
            "confirm_commit": false,
            "lines": [
                "set system host-name ft-test-host"
            ],
            "replace": null,
            "rollback": null,
            "src": null,
            "src_format": null,
            "update": "merge",
            "zeroize": false
        }
    }
}

TASK [Rollback config to rollback 0] ***********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:42
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445089.0556564-1833937-223664645917186 `" && echo ansible-tmp-1749445089.0556564-1833937-223664645917186="` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445089.0556564-1833937-223664645917186 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_config.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833841liov5qze/tmp6fayndlw TO /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445089.0556564-1833937-223664645917186/AnsiballZ_junos_config.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445089.0556564-1833937-223664645917186/ /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445089.0556564-1833937-223664645917186/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445089.0556564-1833937-223664645917186/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445089.0556564-1833937-223664645917186/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "backup": false,
            "backup_options": null,
            "check_commit": false,
            "comment": "configured by junos_config",
            "confirm": 0,
            "confirm_commit": false,
            "lines": null,
            "replace": null,
            "rollback": 0,
            "src": null,
            "src_format": null,
            "update": "merge",
            "zeroize": false
        }
    }
}

TASK [Backup config to custom path] ************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:46
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445092.1025572-1833964-79859334513205 `" && echo ansible-tmp-1749445092.1025572-1833964-79859334513205="` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445092.1025572-1833964-79859334513205 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_config.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833841liov5qze/tmpxvkuza_9 TO /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445092.1025572-1833964-79859334513205/AnsiballZ_junos_config.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445092.1025572-1833964-79859334513205/ /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445092.1025572-1833964-79859334513205/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445092.1025572-1833964-79859334513205/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445092.1025572-1833964-79859334513205/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "__backup__": "set version 23.4I-20240419.0.0358\nset groups member0 system host-name srxeventa\nset groups member0 system backup-router 10.221.191.254\nset groups member0 interfaces fxp0 unit 0 family inet address 10.221.160.25/18\nset groups global system root-authentication encrypted-password \"$1$ZUlES4dp$OUwWo1g7cLoV/aMWpHUnC/\"\nset groups global system login class wheel permissions snmp\nset groups global system login user regress uid 928\nset groups global system login user regress class superuser\nset groups global system login user regress shell csh\nset groups global system login user regress authentication encrypted-password \"$1$kPU..$w.4FGRAGanJ8U4Yq6sbj7.\"\nset groups global system login user remote uid 2000\nset groups global system login user remote class super-user\nset groups global system services netconf ssh\nset groups global system services ssh root-login allow\nset groups global system services finger\nset groups global system services ftp\nset groups global system services rlogin\nset groups global system services telnet\nset groups global system services xnm-clear-text\nset groups global system domain-name englab.juniper.net\nset groups global system domain-search englab.juniper.net\nset groups global system domain-search juniper.net\nset groups global system domain-search jnpr.net\nset groups global system time-zone Asia/Calcutta\nset groups global system debugger-on-break\nset groups global system dump-on-panic\nset groups global system authentication-order password\nset groups global system authentication-order radius\nset groups global system name-server 10.221.192.40\nset groups global system name-server 10.221.192.41\nset groups global system name-server 10.221.192.42\nset groups global system name-server 10.49.32.95\nset groups global system name-server 10.49.32.97\nset groups global system name-server 10.48.144.9\nset groups global system name-server 10.48.144.10\nset groups global system radius-server 10.48.144.16 secret \"$9$TQ/t1IcSrKAt0IRheK8X7VYgaZDm5zNdiqmTn6\"\nset groups global system radius-server 10.48.144.17 secret \"$9$GqUqf3nCApOPfQn690ORhSeWL7-boZDylsgoGHk\"\nset groups global system syslog host log kernel info\nset groups global system syslog host log any notice\nset groups global system syslog host log pfe info\nset groups global system syslog host log interactive-commands any\nset groups global system syslog file messages kernel info\nset groups global system syslog file messages any notice\nset groups global system syslog file messages authorization info\nset groups global system syslog file messages pfe info\nset groups global system syslog file messages archive world-readable\nset groups global system syslog file security interactive-commands any\nset groups global system syslog file security archive world-readable\nset groups global system processes routing enable\nset groups global system processes ntp enable\nset groups global system processes management enable\nset groups global system processes watchdog enable\nset groups global system processes snmp enable\nset groups global system processes inet-process enable\nset groups global system processes mib-process enable\nset groups global system ntp boot-server 66.129.255.75\nset groups global system ntp server 66.129.255.75\nset groups global system ntp server 172.29.131.60\nset groups global system ntp server 172.29.135.60\nset groups global chassis dump-on-panic\nset groups global interfaces lo0 unit 0 family inet address 128.221.160.25/32 primary\nset groups global interfaces lo0 unit 0 family iso address 47.0005.80ff.f800.0000.0108.0001.1282.2116.0025.00\nset groups global interfaces lo0 unit 0 family inet6 address abcd::128:221:160:25/128 primary\nset groups global snmp location \"Systest lab\"\nset groups global snmp contact \"Jay Lloyd\"\nset groups global snmp interface fxp0.0\nset groups global snmp community public authorization read-only\nset groups global snmp community private authorization read-write\nset groups global routing-options router-id 128.221.160.25\nset groups global routing-options static route 172.16.0.0/12 next-hop 10.221.191.254\nset groups global routing-options static route 172.16.0.0/12 retain\nset groups global routing-options static route 172.16.0.0/12 no-readvertise\nset groups global routing-options static route 192.168.0.0/16 next-hop 10.221.191.254\nset groups global routing-options static route 192.168.0.0/16 retain\nset groups global routing-options static route 192.168.0.0/16 no-readvertise\nset groups global routing-options static route 10.0.0.0/8 next-hop 10.221.191.254\nset groups global routing-options static route 10.0.0.0/8 retain\nset groups global routing-options static route 10.0.0.0/8 no-readvertise\nset groups global routing-options static route 66.129.0.0/16 next-hop 10.221.191.254\nset groups global routing-options static route 66.129.0.0/16 retain\nset groups global routing-options static route 66.129.0.0/16 no-readvertise\nset apply-groups global\nset apply-groups member0\nset system host-name ft-test-host\nset system login user ansible_user1 uid 2001\nset system login user ansible_user1 class super-user\nset system login user ansible_user1 authentication encrypted-password \"$6$kyR9WACV$Lx9E/qmnOE5Bnm/CUXjaIkrinEJJoT1cUYwdOULlShT9A9kpvxLpuErsmkB1dVPszgPvV/3KSWvlRV6.rZEST1\"\nset system services netconf ssh\nset system services netconf traceoptions file netconf_trace.log\nset system services netconf traceoptions file size 1g\nset system services netconf traceoptions flag all\nset system services ssh root-login allow\nset system ports console log-out-on-disconnect\nset interfaces ge-0/0/1 unit 0 description \"FT Test interface\"\nset interfaces ge-0/0/3 unit 0 family ethernet-switching\nset interfaces ge-0/0/4 unit 0 family ethernet-switching",
    "changed": false,
    "invocation": {
        "module_args": {
            "backup": true,
            "backup_options": {
                "backup_format": "set",
                "dir_path": "./backup",
                "filename": "ssh_backup.cfg"
            },
            "check_commit": false,
            "comment": "configured by junos_config",
            "confirm": 0,
            "confirm_commit": false,
            "lines": [
                "set system services ssh"
            ],
            "replace": null,
            "rollback": null,
            "src": null,
            "src_format": null,
            "update": "merge",
            "zeroize": false
        }
    }
}

TASK [Debug backup_result] *********************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:56
ok: [10.221.160.25] => {
    "backup_result": {
        "__backup__": "set version 23.4I-20240419.0.0358\nset groups member0 system host-name srxeventa\nset groups member0 system backup-router 10.221.191.254\nset groups member0 interfaces fxp0 unit 0 family inet address 10.221.160.25/18\nset groups global system root-authentication encrypted-password \"$1$ZUlES4dp$OUwWo1g7cLoV/aMWpHUnC/\"\nset groups global system login class wheel permissions snmp\nset groups global system login user regress uid 928\nset groups global system login user regress class superuser\nset groups global system login user regress shell csh\nset groups global system login user regress authentication encrypted-password \"$1$kPU..$w.4FGRAGanJ8U4Yq6sbj7.\"\nset groups global system login user remote uid 2000\nset groups global system login user remote class super-user\nset groups global system services netconf ssh\nset groups global system services ssh root-login allow\nset groups global system services finger\nset groups global system services ftp\nset groups global system services rlogin\nset groups global system services telnet\nset groups global system services xnm-clear-text\nset groups global system domain-name englab.juniper.net\nset groups global system domain-search englab.juniper.net\nset groups global system domain-search juniper.net\nset groups global system domain-search jnpr.net\nset groups global system time-zone Asia/Calcutta\nset groups global system debugger-on-break\nset groups global system dump-on-panic\nset groups global system authentication-order password\nset groups global system authentication-order radius\nset groups global system name-server 10.221.192.40\nset groups global system name-server 10.221.192.41\nset groups global system name-server 10.221.192.42\nset groups global system name-server 10.49.32.95\nset groups global system name-server 10.49.32.97\nset groups global system name-server 10.48.144.9\nset groups global system name-server 10.48.144.10\nset groups global system radius-server 10.48.144.16 secret \"$9$TQ/t1IcSrKAt0IRheK8X7VYgaZDm5zNdiqmTn6\"\nset groups global system radius-server 10.48.144.17 secret \"$9$GqUqf3nCApOPfQn690ORhSeWL7-boZDylsgoGHk\"\nset groups global system syslog host log kernel info\nset groups global system syslog host log any notice\nset groups global system syslog host log pfe info\nset groups global system syslog host log interactive-commands any\nset groups global system syslog file messages kernel info\nset groups global system syslog file messages any notice\nset groups global system syslog file messages authorization info\nset groups global system syslog file messages pfe info\nset groups global system syslog file messages archive world-readable\nset groups global system syslog file security interactive-commands any\nset groups global system syslog file security archive world-readable\nset groups global system processes routing enable\nset groups global system processes ntp enable\nset groups global system processes management enable\nset groups global system processes watchdog enable\nset groups global system processes snmp enable\nset groups global system processes inet-process enable\nset groups global system processes mib-process enable\nset groups global system ntp boot-server 66.129.255.75\nset groups global system ntp server 66.129.255.75\nset groups global system ntp server 172.29.131.60\nset groups global system ntp server 172.29.135.60\nset groups global chassis dump-on-panic\nset groups global interfaces lo0 unit 0 family inet address 128.221.160.25/32 primary\nset groups global interfaces lo0 unit 0 family iso address 47.0005.80ff.f800.0000.0108.0001.1282.2116.0025.00\nset groups global interfaces lo0 unit 0 family inet6 address abcd::128:221:160:25/128 primary\nset groups global snmp location \"Systest lab\"\nset groups global snmp contact \"Jay Lloyd\"\nset groups global snmp interface fxp0.0\nset groups global snmp community public authorization read-only\nset groups global snmp community private authorization read-write\nset groups global routing-options router-id 128.221.160.25\nset groups global routing-options static route 172.16.0.0/12 next-hop 10.221.191.254\nset groups global routing-options static route 172.16.0.0/12 retain\nset groups global routing-options static route 172.16.0.0/12 no-readvertise\nset groups global routing-options static route 192.168.0.0/16 next-hop 10.221.191.254\nset groups global routing-options static route 192.168.0.0/16 retain\nset groups global routing-options static route 192.168.0.0/16 no-readvertise\nset groups global routing-options static route 10.0.0.0/8 next-hop 10.221.191.254\nset groups global routing-options static route 10.0.0.0/8 retain\nset groups global routing-options static route 10.0.0.0/8 no-readvertise\nset groups global routing-options static route 66.129.0.0/16 next-hop 10.221.191.254\nset groups global routing-options static route 66.129.0.0/16 retain\nset groups global routing-options static route 66.129.0.0/16 no-readvertise\nset apply-groups global\nset apply-groups member0\nset system host-name ft-test-host\nset system login user ansible_user1 uid 2001\nset system login user ansible_user1 class super-user\nset system login user ansible_user1 authentication encrypted-password \"$6$kyR9WACV$Lx9E/qmnOE5Bnm/CUXjaIkrinEJJoT1cUYwdOULlShT9A9kpvxLpuErsmkB1dVPszgPvV/3KSWvlRV6.rZEST1\"\nset system services netconf ssh\nset system services netconf traceoptions file netconf_trace.log\nset system services netconf traceoptions file size 1g\nset system services netconf traceoptions flag all\nset system services ssh root-login allow\nset system ports console log-out-on-disconnect\nset interfaces ge-0/0/1 unit 0 description \"FT Test interface\"\nset interfaces ge-0/0/3 unit 0 family ethernet-switching\nset interfaces ge-0/0/4 unit 0 family ethernet-switching",
        "changed": false,
        "failed": false
    }
}

TASK [Assert backup created] *******************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:61
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Post-clean - delete test configuration] **************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_config.yml:66
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445095.306422-1833991-138091167198278 `" && echo ansible-tmp-1749445095.306422-1833991-138091167198278="` echo /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445095.306422-1833991-138091167198278 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_config to juniper.device.junos_config
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_config.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1833841liov5qze/tmpitmsvbow TO /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445095.306422-1833991-138091167198278/AnsiballZ_junos_config.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445095.306422-1833991-138091167198278/ /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445095.306422-1833991-138091167198278/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445095.306422-1833991-138091167198278/AnsiballZ_junos_config.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1833841liov5qze/ansible-tmp-1749445095.306422-1833991-138091167198278/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "backup": false,
            "backup_options": null,
            "check_commit": false,
            "comment": "Post-clean",
            "confirm": 0,
            "confirm_commit": false,
            "lines": [
                "delete interfaces ge-0/0/1 unit 0 description",
                "delete system host-name",
                "delete system services ssh"
            ],
            "replace": null,
            "rollback": null,
            "src": null,
            "src_format": null,
            "update": "merge",
            "zeroize": false
        }
    }
}

PLAY RECAP *************************************************************************************************************************************
10.221.160.25              : ok=10   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


=====================


junos_user

=====================

root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# ansible-playbook -i inventory_junos pb.juniper_junos_user.yml -vvv
ansible-playbook [core 2.18.3]
  config file = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.12/site-packages/ansible
  ansible collection location = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.12.0 (main, Mar  5 2025, 22:49:30) [GCC 9.3.0] (/usr/bin/python3)
  jinja version = 3.1.6
  libyaml = True
Using /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg as config file
host_list declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
script declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
auto declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
Parsed /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos inventory source with ini plugin
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_user: ["'NoneType' object has no attribute 'get'"]
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
Skipping callback 'default', as we already have a stdout callback.
Skipping callback 'minimal', as we already have a stdout callback.
Skipping callback 'oneline', as we already have a stdout callback.

PLAYBOOK: pb.juniper_junos_user.yml ************************************************************************************************************
1 plays in pb.juniper_junos_user.yml

PLAY [Functional Test - junos_user module] *****************************************************************************************************

TASK [Ensure test user is absent before test] **************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_user.yml:8
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos: ["'NoneType' object has no attribute 'get'"]
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_ `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445246.6671767-1834052-87991619813765 `" && echo ansible-tmp-1749445246.6671767-1834052-87991619813765="` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445246.6671767-1834052-87991619813765 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_user.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/tmpzsw4vbsl TO /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445246.6671767-1834052-87991619813765/AnsiballZ_junos_user.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445246.6671767-1834052-87991619813765/ /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445246.6671767-1834052-87991619813765/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445246.6671767-1834052-87991619813765/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445246.6671767-1834052-87991619813765/ > /dev/null 2>&1 && sleep 0'
[WARNING]: statement not found: user ansible_test_user
ok: [10.221.160.25] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "active": true,
            "aggregate": null,
            "encrypted_password": null,
            "full_name": null,
            "name": "ansible_test_user",
            "purge": false,
            "role": null,
            "sshkey": null,
            "state": "absent"
        }
    }
}

TASK [Create a new user account with optional SSH key] *****************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_user.yml:14
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
<10.221.160.25> identified ncclient device handler: junos.
<10.221.160.25> ESTABLISH NETCONF SSH CONNECTION FOR USER: root on PORT 830 TO 10.221.160.25 WITH SSH_CONFIG = None
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_ `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445250.3909385-1834083-228852181602641 `" && echo ansible-tmp-1749445250.3909385-1834083-228852181602641="` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445250.3909385-1834083-228852181602641 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_user.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/tmpyhz2e40e TO /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445250.3909385-1834083-228852181602641/AnsiballZ_junos_user.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445250.3909385-1834083-228852181602641/ /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445250.3909385-1834083-228852181602641/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445250.3909385-1834083-228852181602641/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445250.3909385-1834083-228852181602641/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "active": true,
            "aggregate": null,
            "encrypted_password": null,
            "full_name": "Ansible Test User",
            "name": "ansible_test_user",
            "purge": false,
            "role": "super-user",
            "sshkey": null,
            "state": "present"
        }
    }
}

TASK [Set user password (SHA-512 hashed)] ******************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_user.yml:24
Using passlib to hash input with 'sha512_crypt'
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_ `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445254.8944535-1834108-216086713195014 `" && echo ansible-tmp-1749445254.8944535-1834108-216086713195014="` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445254.8944535-1834108-216086713195014 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_user.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/tmphe93pzfj TO /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445254.8944535-1834108-216086713195014/AnsiballZ_junos_user.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445254.8944535-1834108-216086713195014/ /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445254.8944535-1834108-216086713195014/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445254.8944535-1834108-216086713195014/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445254.8944535-1834108-216086713195014/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "active": true,
            "aggregate": null,
            "encrypted_password": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "full_name": null,
            "name": "ansible_test_user",
            "purge": false,
            "role": "super-user",
            "sshkey": null,
            "state": "present"
        }
    }
}

TASK [Create a list of additional users] *******************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_user.yml:31
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_ `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445258.8182683-1834134-202331208017218 `" && echo ansible-tmp-1749445258.8182683-1834134-202331208017218="` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445258.8182683-1834134-202331208017218 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_user.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/tmpq0k337mq TO /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445258.8182683-1834134-202331208017218/AnsiballZ_junos_user.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445258.8182683-1834134-202331208017218/ /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445258.8182683-1834134-202331208017218/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445258.8182683-1834134-202331208017218/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445258.8182683-1834134-202331208017218/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "active": true,
            "aggregate": [
                {
                    "active": true,
                    "encrypted_password": null,
                    "full_name": "Operator User",
                    "name": "test_user1",
                    "purge": false,
                    "role": "operator",
                    "sshkey": null,
                    "state": "present"
                },
                {
                    "active": true,
                    "encrypted_password": null,
                    "full_name": "ReadOnly User",
                    "name": "test_user2",
                    "purge": false,
                    "role": "read-only",
                    "sshkey": null,
                    "state": "present"
                }
            ],
            "encrypted_password": null,
            "full_name": null,
            "name": null,
            "purge": false,
            "role": null,
            "sshkey": null,
            "state": "present"
        }
    }
}

TASK [Delete additional users] *****************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_user.yml:37
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_ `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445262.7835484-1834168-68551628252605 `" && echo ansible-tmp-1749445262.7835484-1834168-68551628252605="` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445262.7835484-1834168-68551628252605 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_user.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/tmpidw7nd9z TO /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445262.7835484-1834168-68551628252605/AnsiballZ_junos_user.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445262.7835484-1834168-68551628252605/ /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445262.7835484-1834168-68551628252605/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445262.7835484-1834168-68551628252605/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445262.7835484-1834168-68551628252605/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "active": true,
            "aggregate": [
                {
                    "active": true,
                    "encrypted_password": null,
                    "full_name": "Operator User",
                    "name": "test_user1",
                    "purge": false,
                    "role": "operator",
                    "sshkey": null,
                    "state": "absent"
                },
                {
                    "active": true,
                    "encrypted_password": null,
                    "full_name": "ReadOnly User",
                    "name": "test_user2",
                    "purge": false,
                    "role": "read-only",
                    "sshkey": null,
                    "state": "absent"
                }
            ],
            "encrypted_password": null,
            "full_name": null,
            "name": null,
            "purge": false,
            "role": null,
            "sshkey": null,
            "state": "present"
        }
    }
}

TASK [Remove the test user account] ************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_user.yml:43
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_ `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445267.026828-1834193-228275940851650 `" && echo ansible-tmp-1749445267.026828-1834193-228275940851650="` echo /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445267.026828-1834193-228275940851650 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_user to juniper.device.junos_user
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_user.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/tmpwbvtbsij TO /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445267.026828-1834193-228275940851650/AnsiballZ_junos_user.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445267.026828-1834193-228275940851650/ /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445267.026828-1834193-228275940851650/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445267.026828-1834193-228275940851650/AnsiballZ_junos_user.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834048q7mh8mv_/ansible-tmp-1749445267.026828-1834193-228275940851650/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "active": true,
            "aggregate": null,
            "encrypted_password": null,
            "full_name": null,
            "name": "ansible_test_user",
            "purge": false,
            "role": null,
            "sshkey": null,
            "state": "absent"
        }
    }
}

PLAY RECAP *************************************************************************************************************************************
10.221.160.25              : ok=6    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   



===================


junos_snmp_server


===================

root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# ansible-playbook -i inventory_junos pb.juniper_junos_snmp_server.yml -vvv
ansible-playbook [core 2.18.3]
  config file = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.12/site-packages/ansible
  ansible collection location = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.12.0 (main, Mar  5 2025, 22:49:30) [GCC 9.3.0] (/usr/bin/python3)
  jinja version = 3.1.6
  libyaml = True
Using /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg as config file
host_list declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
script declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
auto declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos as it did not pass its verify_file() method
Parsed /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_junos inventory source with ini plugin
redirecting (type: modules) junipernetworks.junos.junos_routing_instances to juniper.device.junos_routing_instances
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_routing_instances: ["'NoneType' object has no
attribute 'get'"]
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_snmp_server: ["'NoneType' object has no attribute
'get'"]
[WARNING]: errors were encountered during the plugin load for assert: ["'NoneType' object has no attribute 'get'"]
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
Skipping callback 'default', as we already have a stdout callback.
Skipping callback 'minimal', as we already have a stdout callback.
Skipping callback 'oneline', as we already have a stdout callback.

PLAYBOOK: pb.juniper_junos_snmp_server.yml *****************************************************************************************************
1 plays in pb.juniper_junos_snmp_server.yml

PLAY [Functional Test - junos_snmp_server (all states)] ****************************************************************************************

TASK [Ensure routing instances clv1 and clv2 exist] ********************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:9
redirecting (type: modules) junipernetworks.junos.junos_routing_instances to juniper.device.junos_routing_instances
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos: ["'NoneType' object has no attribute 'get'"]
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445346.6384404-1834242-148141323156354 `" && echo ansible-tmp-1749445346.6384404-1834242-148141323156354="` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445346.6384404-1834242-148141323156354 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_routing_instances to juniper.device.junos_routing_instances
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_routing_instances.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/tmpwat59y2l TO /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445346.6384404-1834242-148141323156354/AnsiballZ_junos_routing_instances.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445346.6384404-1834242-148141323156354/ /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445346.6384404-1834242-148141323156354/AnsiballZ_junos_routing_instances.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445346.6384404-1834242-148141323156354/AnsiballZ_junos_routing_instances.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445346.6384404-1834242-148141323156354/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "after": [
        {
            "name": "clv1",
            "type": "virtual-router"
        },
        {
            "name": "clv2",
            "type": "virtual-router"
        }
    ],
    "before": [],
    "changed": true,
    "commands": [
        "<nc:routing-instances xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:instance><nc:name>clv1</nc:name><nc:instance-type>virtual-router</nc:instance-type></nc:instance><nc:instance><nc:name>clv2</nc:name><nc:instance-type>virtual-router</nc:instance-type></nc:instance></nc:routing-instances>"
    ],
    "invocation": {
        "module_args": {
            "config": [
                {
                    "bridge_domains": null,
                    "connector_id_advertise": null,
                    "description": null,
                    "egress_protection": null,
                    "instance_role": null,
                    "interfaces": null,
                    "l2vpn_id": null,
                    "name": "clv1",
                    "no_irb_layer_2_copy": null,
                    "no_local_switching": null,
                    "no_normalization": null,
                    "no_vrf_advertise": null,
                    "no_vrf_propagate_ttl": null,
                    "qualified_bum_pruning_mode": null,
                    "route_distinguisher": null,
                    "routing_interface": null,
                    "type": "virtual-router",
                    "vrf_exports": null,
                    "vrf_imports": null
                },
                {
                    "bridge_domains": null,
                    "connector_id_advertise": null,
                    "description": null,
                    "egress_protection": null,
                    "instance_role": null,
                    "interfaces": null,
                    "l2vpn_id": null,
                    "name": "clv2",
                    "no_irb_layer_2_copy": null,
                    "no_local_switching": null,
                    "no_normalization": null,
                    "no_vrf_advertise": null,
                    "no_vrf_propagate_ttl": null,
                    "qualified_bum_pruning_mode": null,
                    "route_distinguisher": null,
                    "routing_interface": null,
                    "type": "virtual-router",
                    "vrf_exports": null,
                    "vrf_imports": null
                }
            ],
            "running_config": null,
            "state": "merged"
        }
    }
}

TASK [Render SNMP server configuration (dry-run XML)] ******************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:18
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
<10.221.160.25> identified ncclient device handler: junos.
<10.221.160.25> ESTABLISH NETCONF SSH CONNECTION FOR USER: root on PORT 830 TO 10.221.160.25 WITH SSH_CONFIG = None
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445356.4609346-1834273-230997034365222 `" && echo ansible-tmp-1749445356.4609346-1834273-230997034365222="` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445356.4609346-1834273-230997034365222 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_snmp_server.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/tmp7_j0zjkz TO /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445356.4609346-1834273-230997034365222/AnsiballZ_junos_snmp_server.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445356.4609346-1834273-230997034365222/ /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445356.4609346-1834273-230997034365222/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445356.4609346-1834273-230997034365222/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445356.4609346-1834273-230997034365222/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "config": {
                "arp": {
                    "host_name_resolution": true,
                    "set": true
                },
                "client_lists": null,
                "communities": null,
                "contact": null,
                "customization": null,
                "description": null,
                "engine_id": null,
                "filter_duplicates": null,
                "filter_interfaces": null,
                "health_monitor": null,
                "if_count_with_filter_interfaces": null,
                "interfaces": null,
                "location": null,
                "logical_system_trap_filter": null,
                "name": null,
                "nonvolatile": null,
                "proxies": null,
                "rmon": null,
                "routing_instance_access": {
                    "access_lists": [
                        "clv1",
                        "clv2"
                    ],
                    "set": true
                },
                "snmp_v3": null,
                "subagent": null,
                "traceoptions": null,
                "trap_groups": null,
                "trap_options": null,
                "views": null
            },
            "running_config": null,
            "state": "rendered"
        }
    },
    "rendered": "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:arp><nc:host-name-resolution/></nc:arp><nc:routing-instance-access><nc:access-list><nc:name>clv1</nc:name></nc:access-list><nc:access-list><nc:name>clv2</nc:name></nc:access-list></nc:routing-instance-access></nc:snmp>"
}

TASK [Assert rendered SNMP config] *************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:32
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Parse SNMP server config from XML] *******************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:38
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445358.6038785-1834299-164922445240397 `" && echo ansible-tmp-1749445358.6038785-1834299-164922445240397="` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445358.6038785-1834299-164922445240397 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_snmp_server.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/tmpx6kqgd5o TO /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445358.6038785-1834299-164922445240397/AnsiballZ_junos_snmp_server.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445358.6038785-1834299-164922445240397/ /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445358.6038785-1834299-164922445240397/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445358.6038785-1834299-164922445240397/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445358.6038785-1834299-164922445240397/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "config": null,
            "running_config": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<rpc-reply>\n  <configuration>\n    <system xmlns=\"http://yang.juniper.net/junos-es/conf/system\">\n      <snmp>\n        <client-list>\n          <name>cl1</name>\n          <client-address-list><name>192.16.1.0/24</name></client-address-list>\n          <client-address-list><name>192.16.2.0/24</name></client-address-list>\n          <client-address-list><name>11.11.11.11/32</name><restrict/></client-address-list>\n        </client-list>\n        <client-list>\n          <name>cl2</name>\n          <client-address-list><name>192.16.4.0/24</name></client-address-list>\n        </client-list>\n        <routing-instance-access>\n          <access-list><name>clv1</name></access-list>\n          <access-list><name>clv2</name></access-list>\n        </routing-instance-access>\n        <arp><host-name-resolution/></arp>\n      </snmp>\n    </system>\n  </configuration>\n</rpc-reply>",
            "state": "parsed"
        }
    },
    "parsed": {}
}

TASK [Assert parsed SNMP config] ***************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:44
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Merge SNMP server configuration] *********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:50
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445360.2303143-1834325-213981716452244 `" && echo ansible-tmp-1749445360.2303143-1834325-213981716452244="` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445360.2303143-1834325-213981716452244 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_snmp_server.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/tmpjl5qo7le TO /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445360.2303143-1834325-213981716452244/AnsiballZ_junos_snmp_server.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445360.2303143-1834325-213981716452244/ /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445360.2303143-1834325-213981716452244/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445360.2303143-1834325-213981716452244/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445360.2303143-1834325-213981716452244/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "after": {
        "arp": {
            "host_name_resolution": true
        },
        "client_lists": [
            {
                "addresses": [
                    {
                        "address": "192.16.1.0/24"
                    },
                    {
                        "address": "192.16.2.0/24"
                    },
                    {
                        "address": "11.11.11.11/32",
                        "restrict": true
                    }
                ],
                "name": "cl1"
            },
            {
                "addresses": [
                    {
                        "address": "192.16.4.0/24"
                    }
                ],
                "name": "cl2"
            }
        ],
        "routing_instance_access": {
            "access_lists": [
                "clv1",
                "clv2"
            ]
        }
    },
    "before": {},
    "changed": true,
    "commands": [
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:arp><nc:host-name-resolution/></nc:arp><nc:client-list><nc:name>cl1</nc:name><nc:client-address-list><nc:name>192.16.1.0/24</nc:name></nc:client-address-list><nc:client-address-list><nc:name>192.16.2.0/24</nc:name></nc:client-address-list><nc:client-address-list><nc:name>11.11.11.11</nc:name><nc:restrict/></nc:client-address-list></nc:client-list><nc:client-list><nc:name>cl2</nc:name><nc:client-address-list><nc:name>192.16.4.0/24</nc:name></nc:client-address-list></nc:client-list><nc:routing-instance-access><nc:access-list><nc:name>clv1</nc:name></nc:access-list><nc:access-list><nc:name>clv2</nc:name></nc:access-list></nc:routing-instance-access></nc:snmp>"
    ],
    "invocation": {
        "module_args": {
            "config": {
                "arp": {
                    "host_name_resolution": true,
                    "set": true
                },
                "client_lists": [
                    {
                        "addresses": [
                            {
                                "address": "192.16.1.0/24",
                                "restrict": null
                            },
                            {
                                "address": "192.16.2.0/24",
                                "restrict": null
                            },
                            {
                                "address": "11.11.11.11",
                                "restrict": true
                            }
                        ],
                        "name": "cl1"
                    },
                    {
                        "addresses": [
                            {
                                "address": "192.16.4.0/24",
                                "restrict": null
                            }
                        ],
                        "name": "cl2"
                    }
                ],
                "communities": null,
                "contact": null,
                "customization": null,
                "description": null,
                "engine_id": null,
                "filter_duplicates": null,
                "filter_interfaces": null,
                "health_monitor": null,
                "if_count_with_filter_interfaces": null,
                "interfaces": null,
                "location": null,
                "logical_system_trap_filter": null,
                "name": null,
                "nonvolatile": null,
                "proxies": null,
                "rmon": null,
                "routing_instance_access": {
                    "access_lists": [
                        "clv1",
                        "clv2"
                    ],
                    "set": true
                },
                "snmp_v3": null,
                "subagent": null,
                "traceoptions": null,
                "trap_groups": null,
                "trap_options": null,
                "views": null
            },
            "running_config": null,
            "state": "merged"
        }
    }
}

TASK [Assert merged SNMP config] ***************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:74
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Replace SNMP server configuration] *******************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:79
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445366.8990986-1834351-126326081422067 `" && echo ansible-tmp-1749445366.8990986-1834351-126326081422067="` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445366.8990986-1834351-126326081422067 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_snmp_server.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/tmpcu4v6pg2 TO /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445366.8990986-1834351-126326081422067/AnsiballZ_junos_snmp_server.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445366.8990986-1834351-126326081422067/ /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445366.8990986-1834351-126326081422067/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445366.8990986-1834351-126326081422067/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445366.8990986-1834351-126326081422067/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "after": {
        "contact": "ansiblesupport11@redhat.com",
        "customization": {
            "ether_stats_ifd_only": true
        },
        "description": "Local SNMP Server",
        "engine_id": {
            "use_mac_address": true
        },
        "filter_duplicates": true,
        "filter_interfaces": {
            "all_internal_interfaces": true,
            "interfaces": [
                "eth1",
                "eth2"
            ]
        }
    },
    "before": {
        "arp": {
            "host_name_resolution": true
        },
        "client_lists": [
            {
                "addresses": [
                    {
                        "address": "192.16.1.0/24"
                    },
                    {
                        "address": "192.16.2.0/24"
                    },
                    {
                        "address": "11.11.11.11/32",
                        "restrict": true
                    }
                ],
                "name": "cl1"
            },
            {
                "addresses": [
                    {
                        "address": "192.16.4.0/24"
                    }
                ],
                "name": "cl2"
            }
        ],
        "routing_instance_access": {
            "access_lists": [
                "clv1",
                "clv2"
            ]
        }
    },
    "changed": true,
    "commands": [
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"/>",
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\" delete=\"delete\"/>",
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:contact>ansiblesupport11@redhat.com</nc:contact><nc:customization><nc:ether-stats-ifd-only/></nc:customization><nc:description>Local SNMP Server</nc:description><nc:engine-id><nc:local>local1</nc:local><nc:use-default-ip-address/><nc:use-mac-address/></nc:engine-id><nc:filter-duplicates/><nc:filter-interfaces><nc:all-internal-interfaces/><nc:interfaces><nc:name>eth1</nc:name></nc:interfaces><nc:interfaces><nc:name>eth2</nc:name></nc:interfaces></nc:filter-interfaces></nc:snmp>"
    ],
    "invocation": {
        "module_args": {
            "config": {
                "arp": null,
                "client_lists": null,
                "communities": null,
                "contact": "ansiblesupport11@redhat.com",
                "customization": {
                    "ether_stats_ifd_only": true
                },
                "description": "Local SNMP Server",
                "engine_id": {
                    "local": "local1",
                    "use_default_ip_address": true,
                    "use_mac_address": true
                },
                "filter_duplicates": true,
                "filter_interfaces": {
                    "all_internal_interfaces": true,
                    "interfaces": [
                        "eth1",
                        "eth2"
                    ],
                    "set": true
                },
                "health_monitor": null,
                "if_count_with_filter_interfaces": null,
                "interfaces": null,
                "location": null,
                "logical_system_trap_filter": null,
                "name": null,
                "nonvolatile": null,
                "proxies": null,
                "rmon": null,
                "routing_instance_access": null,
                "snmp_v3": null,
                "subagent": null,
                "traceoptions": null,
                "trap_groups": null,
                "trap_options": null,
                "views": null
            },
            "running_config": null,
            "state": "replaced"
        }
    }
}

TASK [Assert replaced SNMP config] *************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:100
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Override SNMP server configuration] ******************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:105
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445376.390375-1834378-8522880288546 `" && echo ansible-tmp-1749445376.390375-1834378-8522880288546="` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445376.390375-1834378-8522880288546 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_snmp_server.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/tmpcpqp15em TO /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445376.390375-1834378-8522880288546/AnsiballZ_junos_snmp_server.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445376.390375-1834378-8522880288546/ /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445376.390375-1834378-8522880288546/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445376.390375-1834378-8522880288546/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445376.390375-1834378-8522880288546/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "before": {
        "contact": "ansiblesupport11@redhat.com",
        "customization": {
            "ether_stats_ifd_only": true
        },
        "description": "Local SNMP Server",
        "engine_id": {
            "use_mac_address": true
        },
        "filter_duplicates": true,
        "filter_interfaces": {
            "all_internal_interfaces": true,
            "interfaces": [
                "eth1",
                "eth2"
            ]
        }
    },
    "changed": false,
    "commands": [
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"/>",
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\" delete=\"delete\"/>",
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"><nc:contact>ansiblesupport11@redhat.com</nc:contact><nc:customization><nc:ether-stats-ifd-only/></nc:customization><nc:description>Local SNMP Server</nc:description><nc:engine-id><nc:local>local1</nc:local><nc:use-default-ip-address/><nc:use-mac-address/></nc:engine-id><nc:filter-duplicates/><nc:filter-interfaces><nc:all-internal-interfaces/><nc:interfaces><nc:name>eth1</nc:name></nc:interfaces><nc:interfaces><nc:name>eth2</nc:name></nc:interfaces></nc:filter-interfaces></nc:snmp>"
    ],
    "invocation": {
        "module_args": {
            "config": {
                "arp": null,
                "client_lists": null,
                "communities": null,
                "contact": "ansiblesupport11@redhat.com",
                "customization": {
                    "ether_stats_ifd_only": true
                },
                "description": "Local SNMP Server",
                "engine_id": {
                    "local": "local1",
                    "use_default_ip_address": true,
                    "use_mac_address": true
                },
                "filter_duplicates": true,
                "filter_interfaces": {
                    "all_internal_interfaces": true,
                    "interfaces": [
                        "eth1",
                        "eth2"
                    ],
                    "set": true
                },
                "health_monitor": null,
                "if_count_with_filter_interfaces": null,
                "interfaces": null,
                "location": null,
                "logical_system_trap_filter": null,
                "name": null,
                "nonvolatile": null,
                "proxies": null,
                "rmon": null,
                "routing_instance_access": null,
                "snmp_v3": null,
                "subagent": null,
                "traceoptions": null,
                "trap_groups": null,
                "trap_options": null,
                "views": null
            },
            "running_config": null,
            "state": "overridden"
        }
    }
}

TASK [Assert overridden SNMP config] ***********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:126
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Gather SNMP server configuration from device] ********************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:131
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445383.7733054-1834413-2516452717993 `" && echo ansible-tmp-1749445383.7733054-1834413-2516452717993="` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445383.7733054-1834413-2516452717993 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_snmp_server.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/tmpfo6b7225 TO /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445383.7733054-1834413-2516452717993/AnsiballZ_junos_snmp_server.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445383.7733054-1834413-2516452717993/ /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445383.7733054-1834413-2516452717993/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445383.7733054-1834413-2516452717993/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445383.7733054-1834413-2516452717993/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "changed": false,
    "gathered": {
        "contact": "ansiblesupport11@redhat.com",
        "customization": {
            "ether_stats_ifd_only": true
        },
        "description": "Local SNMP Server",
        "engine_id": {
            "use_mac_address": true
        },
        "filter_duplicates": true,
        "filter_interfaces": {
            "all_internal_interfaces": true,
            "interfaces": [
                "eth1",
                "eth2"
            ]
        }
    },
    "invocation": {
        "module_args": {
            "config": null,
            "running_config": null,
            "state": "gathered"
        }
    }
}

TASK [Assert gathered SNMP config] *************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:136
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Delete SNMP server configuration] ********************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:142
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445385.8192365-1834439-13235811213841 `" && echo ansible-tmp-1749445385.8192365-1834439-13235811213841="` echo /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445385.8192365-1834439-13235811213841 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_snmp_server to juniper.device.junos_snmp_server
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_snmp_server.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/tmp77dmjzmx TO /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445385.8192365-1834439-13235811213841/AnsiballZ_junos_snmp_server.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445385.8192365-1834439-13235811213841/ /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445385.8192365-1834439-13235811213841/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445385.8192365-1834439-13235811213841/AnsiballZ_junos_snmp_server.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1834238kd3xbvnf/ansible-tmp-1749445385.8192365-1834439-13235811213841/ > /dev/null 2>&1 && sleep 0'
ok: [10.221.160.25] => {
    "before": {
        "contact": "ansiblesupport11@redhat.com",
        "customization": {
            "ether_stats_ifd_only": true
        },
        "description": "Local SNMP Server",
        "engine_id": {
            "use_mac_address": true
        },
        "filter_duplicates": true,
        "filter_interfaces": {
            "all_internal_interfaces": true,
            "interfaces": [
                "eth1",
                "eth2"
            ]
        }
    },
    "changed": false,
    "commands": [
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"/>",
        "<nc:snmp xmlns:nc=\"urn:ietf:params:xml:ns:netconf:base:1.0\" delete=\"delete\"/>"
    ],
    "invocation": {
        "module_args": {
            "config": {
                "arp": null,
                "client_lists": null,
                "communities": null,
                "contact": null,
                "customization": null,
                "description": null,
                "engine_id": null,
                "filter_duplicates": null,
                "filter_interfaces": null,
                "health_monitor": null,
                "if_count_with_filter_interfaces": null,
                "interfaces": null,
                "location": null,
                "logical_system_trap_filter": null,
                "name": null,
                "nonvolatile": null,
                "proxies": null,
                "rmon": null,
                "routing_instance_access": null,
                "snmp_v3": null,
                "subagent": null,
                "traceoptions": null,
                "trap_groups": null,
                "trap_options": null,
                "views": null
            },
            "running_config": null,
            "state": "deleted"
        }
    }
}

TASK [Assert deleted SNMP config] **************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_snmp_server.yml:148
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

PLAY RECAP *************************************************************************************************************************************
10.221.160.25              : ok=15   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

