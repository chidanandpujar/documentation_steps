config:
set system login user ansible_user1 class super-user authentication plain-text-password 
New password:
Retype new password:

set system services netconf ssh root-login allow.





root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# ansible-playbook -i inventory_network_cli pb.juniper_junos_netconf.yml -vvv 
ansible-playbook [core 2.18.3]
  config file = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.12/site-packages/ansible
  ansible collection location = /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.12.0 (main, Mar  5 2025, 22:49:30) [GCC 9.3.0] (/usr/bin/python3)
  jinja version = 3.1.6
  libyaml = True
Using /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/ansible.cfg as config file
host_list declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
script declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
auto declined parsing /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli as it did not pass its verify_file() method
Parsed /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/inventory_network_cli inventory source with ini plugin
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos_netconf: ["'NoneType' object has no attribute 'get'"]
[WARNING]: errors were encountered during the plugin load for assert: ["'NoneType' object has no attribute 'get'"]
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
Skipping callback 'default', as we already have a stdout callback.
Skipping callback 'minimal', as we already have a stdout callback.
Skipping callback 'oneline', as we already have a stdout callback.

PLAYBOOK: pb.juniper_junos_netconf.yml ***********************************************************************************************************************************************************************************************************************
1 plays in pb.juniper_junos_netconf.yml

PLAY [Functional Test - junos_netconf module] ****************************************************************************************************************************************************************************************************************

TASK [Enable NETCONF service on port 830] ********************************************************************************************************************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_netconf.yml:9
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
[WARNING]: errors were encountered during the plugin load for junipernetworks.junos.junos: ["'NoneType' object has no attribute 'get'"]
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308 `" && echo ansible-tmp-1749188252.784234-1787543-40548259530308="` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_netconf.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1787539m3iza3xa/tmp9e0667yx TO /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/AnsiballZ_junos_netconf.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/ /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/AnsiballZ_junos_netconf.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/AnsiballZ_junos_netconf.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188252.784234-1787543-40548259530308/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "commands": [
        "set system services netconf ssh port 830"
    ],
    "invocation": {
        "module_args": {
            "netconf_port": 830,
            "state": "present"
        }
    }
}

TASK [Assert NETCONF service was enabled] ********************************************************************************************************************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_netconf.yml:15
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Disable NETCONF service] *******************************************************************************************************************************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_netconf.yml:21
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
<10.221.160.25> ESTABLISH LOCAL CONNECTION FOR USER: root
<10.221.160.25> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa `"&& mkdir "` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118 `" && echo ansible-tmp-1749188257.5077388-1787572-234496017057118="` echo /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118 `" ) && sleep 0'
redirecting (type: modules) junipernetworks.junos.junos_netconf to juniper.device.junos_netconf
Using module file /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/ansible_collections/juniper/device/plugins/modules/junos_netconf.py
<10.221.160.25> PUT /root/.ansible/tmp/ansible-local-1787539m3iza3xa/tmphoc9xf0d TO /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/AnsiballZ_junos_netconf.py
<10.221.160.25> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/ /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/AnsiballZ_junos_netconf.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c '/usr/bin/python3 /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/AnsiballZ_junos_netconf.py && sleep 0'
<10.221.160.25> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-local-1787539m3iza3xa/ansible-tmp-1749188257.5077388-1787572-234496017057118/ > /dev/null 2>&1 && sleep 0'
changed: [10.221.160.25] => {
    "changed": true,
    "commands": [
        "delete system services netconf"
    ],
    "invocation": {
        "module_args": {
            "netconf_port": 830,
            "state": "absent"
        }
    }
}

TASK [Assert NETCONF service was disabled] *******************************************************************************************************************************************************************************************************************
task path: /root/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos/pb.juniper_junos_netconf.yml:26
ok: [10.221.160.25] => {
    "changed": false,
    "msg": "All assertions passed"
}

PLAY RECAP ***************************************************************************************************************************************************************************************************************************************************
10.221.160.25              : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

root@masterhost:~/ansible_modules_redirection_ansible_merger_branch/ansible-junos-stdlib/tests/junipernetworks.junos# 
