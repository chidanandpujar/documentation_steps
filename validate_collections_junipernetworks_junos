
junos-eznc >= 2.7.3
jsnapy>=1.3.7
jxmlease
xmltodict
packaging
ansible
ansible-galaxy collection install junipernetworks.junos ( post v11.1.0 release)

(juniper_device) root@nms5-salt-master-b:~/juniper_device_check1# cat inventory_junos 
[junos]
10.53.103.61

[junos:vars]
ansible_network_os=junipernetworks.junos.junos 
ansible_ssh_user=root
ansible_ssh_pass=Embe1mpls
ansible_connection=ansible.netcommon.netconf

[all:vars]
ansible_python_interpreter=/root/juniper_device_check1/juniper_device/bin/python


(juniper_device) root@nms5-salt-master-b:~/juniper_device_check1# cat ansible.cfg 

[defaults]
hash_behaviour=merge
inventory = inventory
host_key_checking = False
log_path = ./ansible.log
timeout=120

copy: https://github.com/Juniper/ansible-junos-stdlib/blob/master/ansible_collections/junipernetworks/junos/meta/runtime.yml to  /root/.ansible/collections/ansible_collections/junipernetworks/junos/meta/runtime.yml 

(juniper_device) root@nms5-salt-master-b:~/juniper_device_check1# cat pb.juniper_junos_facts.yml
- name: Functional Test - junos_facts module
  hosts: all
  gather_facts: false
  connection: netconf
  collections:
    - junipernetworks.junos

  tasks:
    - name: Collect default set of facts (min)
      junipernetworks.junos.junos_facts:
      register: default_facts

    - name: Assert default facts gathered
      assert:
        that:
          - default_facts.ansible_facts is defined
          - default_facts.ansible_facts.ansible_net_model is defined
          - default_facts.ansible_facts.ansible_net_hostname is defined

    - name: Collect full facts including config and interfaces
      junipernetworks.junos.junos_facts:
        gather_subset:
          - all
      register: full_facts

    - name: Assert full facts gathered
      assert:
        that:
          - full_facts.ansible_facts.ansible_net_interfaces is defined
          - full_facts.ansible_facts.ansible_net_config is defined

    - name: Collect hardware and config with text format
      junipernetworks.junos.junos_facts:
        gather_subset:
          - hardware
          - config
        config_format: text
      register: hw_config_facts

    - name: Assert hardware and config facts gathered
      assert:
        that:
          - hw_config_facts.ansible_facts.ansible_net_config is defined
          - "'system' in hw_config_facts.ansible_facts.ansible_net_config"


(juniper_device) root@nms5-salt-master-b:~/juniper_device_check1# ansible-playbook -i inventory_junos pb.juniper_junos_facts.yml

PLAY [Functional Test - junos_facts module] ******************************************************************************************

TASK [Collect default set of facts (min)] ********************************************************************************************
[WARNING]: Deprecation warnings can be disabled by setting `deprecation_warnings=False` in ansible.cfg.
[DEPRECATION WARNING]: Importing 'to_native' from 'ansible.module_utils._text' is deprecated. This feature will be removed from ansible-core version 2.24. Use ansible.module_utils.common.text.converters instead.
[DEPRECATION WARNING]: Importing 'to_text' from 'ansible.module_utils._text' is deprecated. This feature will be removed from ansible-core version 2.24. Use ansible.module_utils.common.text.converters instead.
[DEPRECATION WARNING]: Importing 'to_bytes' from 'ansible.module_utils._text' is deprecated. This feature will be removed from ansible-core version 2.24. Use ansible.module_utils.common.text.converters instead.
[DEPRECATION WARNING]: Passing `warnings` to `exit_json` or `fail_json` is deprecated. This feature will be removed from ansible-core version 2.23. Use `AnsibleModule.warn` instead.
ok: [10.53.103.61]

TASK [Assert default facts gathered] *************************************************************************************************
ok: [10.53.103.61] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Collect full facts including config and interfaces] ****************************************************************************
ok: [10.53.103.61]

TASK [Assert full facts gathered] ****************************************************************************************************
ok: [10.53.103.61] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Collect hardware and config with text format] **********************************************************************************
ok: [10.53.103.61]

TASK [Assert hardware and config facts gathered] *************************************************************************************
ok: [10.53.103.61] => {
    "changed": false,
    "msg": "All assertions passed"
}

PLAY RECAP ***************************************************************************************************************************
10.53.103.61               : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

